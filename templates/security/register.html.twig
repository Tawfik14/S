{% extends 'base.html.twig' %}
{% block title %}Inscription — MovieNight{% endblock %}

{% block body %}
<section class="max-w-2xl mx-auto mt-10">
  <div class="rounded-2xl bg-neutral-900 ring-1 ring-white/10 overflow-hidden">
    <div class="px-6 py-6 sm:px-8 sm:py-8">
      <h1 class="text-3xl font-extrabold">Créer un compte</h1>
      <p class="mt-1 text-neutral-400">Rejoignez MovieNight pour sauvegarder vos favoris, noter et commenter.</p>

      {% for message in app.flashes('success') %}
        <div class="mt-4 rounded-lg bg-emerald-500/10 text-emerald-200 px-4 py-2 text-sm">{{ message }}</div>
      {% endfor %}

      <div class="mt-6">
        {{ form_start(registrationForm) }}
          {{ form_errors(registrationForm) }}

          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div class="sm:col-span-2">
              {{ form_label(registrationForm.pseudo, 'Pseudo', { label_attr: { class: 'block text-sm text-neutral-300 mb-1' } }) }}
              {{ form_widget(registrationForm.pseudo, { attr: { class: 'w-full px-3 py-2 rounded-lg bg-neutral-800 border border-white/10 focus:outline-none focus:ring-2 focus:ring-rose-500' } }) }}
              {{ form_errors(registrationForm.pseudo) }}
            </div>

            <div>
              {{ form_label(registrationForm.firstName, 'Prénom', { label_attr: { class: 'block text-sm text-neutral-300 mb-1' } }) }}
              {{ form_widget(registrationForm.firstName, { attr: { class: 'w-full px-3 py-2 rounded-lg bg-neutral-800 border border-white/10 focus:outline-none focus:ring-2 focus:ring-rose-500' } }) }}
              {{ form_errors(registrationForm.firstName) }}
            </div>

            <div>
              {{ form_label(registrationForm.lastName, 'Nom', { label_attr: { class: 'block text-sm text-neutral-300 mb-1' } }) }}
              {{ form_widget(registrationForm.lastName, { attr: { class: 'w-full px-3 py-2 rounded-lg bg-neutral-800 border border-white/10 focus:outline-none focus:ring-2 focus:ring-rose-500' } }) }}
              {{ form_errors(registrationForm.lastName) }}
            </div>

            <div class="sm:col-span-2">
              {{ form_label(registrationForm.birthDate, 'Date de naissance', { label_attr: { class: 'block text-sm text-neutral-300 mb-1' } }) }}
              {{ form_widget(registrationForm.birthDate, { attr: { class: 'w-full px-3 py-2 rounded-lg bg-neutral-800 border border-white/10 focus:outline-none focus:ring-2 focus:ring-rose-500' } }) }}
              <p class="text-xs text-neutral-500 mt-1">Format : JJ/MM/AAAA (sélecteur natif).</p>
              {{ form_errors(registrationForm.birthDate) }}
            </div>

            <div class="sm:col-span-2">
              {{ form_label(registrationForm.email, 'Email', { label_attr: { class: 'block text-sm text-neutral-300 mb-1' } }) }}
              {{ form_widget(registrationForm.email, { attr: { class: 'w-full px-3 py-2 rounded-lg bg-neutral-800 border border-white/10 focus:outline-none focus:ring-2 focus:ring-rose-500' } }) }}
              {{ form_errors(registrationForm.email) }}
            </div>

            <div>
              {{ form_label(registrationForm.plainPassword.first, 'Mot de passe', { label_attr: { class: 'block text-sm text-neutral-300 mb-1' } }) }}
              {{ form_widget(registrationForm.plainPassword.first, { attr: { class: 'w-full px-3 py-2 rounded-lg bg-neutral-800 border border-white/10 focus:outline-none focus:ring-2 focus:ring-rose-500' } }) }}
              <p class="text-xs text-neutral-500 mt-1">Au moins 8 caractères.</p>
              {{ form_errors(registrationForm.plainPassword.first) }}
            </div>

            <div>
              {{ form_label(registrationForm.plainPassword.second, 'Confirmation', { label_attr: { class: 'block text-sm text-neutral-300 mb-1' } }) }}
              {{ form_widget(registrationForm.plainPassword.second, { attr: { class: 'w-full px-3 py-2 rounded-lg bg-neutral-800 border border-white/10 focus:outline-none focus:ring-2 focus:ring-rose-500' } }) }}
              {{ form_errors(registrationForm.plainPassword.second) }}
            </div>
          </div>

          <div class="pt-4">
            <button type="submit" class="bg-rose-600 hover:bg-rose-500 text-white px-4 py-2 rounded-lg font-semibold">
              S’inscrire
            </button>
          </div>
        {{ form_end(registrationForm) }}

        <p class="mt-4 text-sm text-neutral-400">
          Déjà inscrit ?
          <a href="{{ path('app_login') }}" class="text-rose-400 hover:text-rose-300">Se connecter</a>
        </p>
      </div>
    </div>
  </div>
</section>
{% endblock %}

