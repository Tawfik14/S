{# Fragment HTML pour une saison (utilisé en lazy-load) #}
{% set s = season %}
<div class="space-y-3">
  {% if s.overview %}
    <p class="text-neutral-300">{{ s.overview }}</p>
  {% endif %}

  {% if s.episodes is not empty %}
    <ul class="grid gap-4 sm:grid-cols-2">
      {% for e in s.episodes %}
        <li class="flex gap-4 p-3 rounded-xl bg-neutral-900 ring-1 ring-white/10">
          <div class="w-28 h-16 rounded-md overflow-hidden ring-1 ring-white/10 bg-neutral-800 shrink-0">
            <img src="{{ img.img(e.still_path, 'w300') }}" alt="{{ e.name }}" class="w-full h-full object-cover">
          </div>
          <div class="min-w-0">
            <div class="text-sm font-semibold truncate">
              {{ e.episode_number }}. {{ e.name }}
            </div>
            <div class="text-xs text-neutral-400">
              {% if e.air_date %}Diffusé le {{ e.air_date|date('d/m/Y') }}{% else %}Date inconnue{% endif %}
              {% if e.runtime %} • {{ e.runtime }} min{% endif %}
              {% if e.vote_average %} • {{ e.vote_average|number_format(1, ',', ' ') }}/10{% endif %}
            </div>
            {% if e.overview %}
              <p class="mt-1 text-sm text-neutral-300 line-clamp-3">{{ e.overview }}</p>
            {% endif %}
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <div class="text-neutral-400 text-sm">Aucun épisode trouvé pour cette saison.</div>
  {% endif %}
</div>

